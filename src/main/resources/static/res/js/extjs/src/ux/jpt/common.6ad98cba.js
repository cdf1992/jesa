function isIEWeb(){return!!(window.ActiveXObject||"ActiveXObject"in window)}function checkIs360(){var e=!1,n=!1;return window.navigator.appName.indexOf("Microsoft")!=-1&&(n=!0),n&&window.navigator.userProfile+""=="null"&&(e=!0),!!e}function getWebVersion(){var e={},n=navigator.userAgent.toLowerCase();return isIEWeb()?"IE":checkIs360()?"360":(document.getBoxObjectFor?e.firefox=n.match(/firefox\/([\d.]+)/)[1]:window.MessageEvent&&!document.getBoxObjectFor?e.chrome=n.match(/chrome\/([\d.]+)/)[1]:window.opera?e.opera=n.match(/opera.([\d.]+)/)[1]:window.openDatabase&&(e.safari=n.match(/version\/([\d.]+)/)[1]),e.firefox?"Firefox":e.chrome?"Chrome":e.opera?"Opera":e.safari?"Safari":void 0)}function velidateNsrsbh(e){var n=/^[0-9a-zA-Z]+$/;return""==e?(jAlert("<div id='popup_message'>读取证书信息失败，未获取到合法的纳税人信息,请重新提交请求或检查金税盘/税控盘是否插入！</div>","提示",function(e){e&&(window.location.href=getDomainName())}),!1):!!n.test(e)||(jAlert("<div id='popup_message'>读取到的纳税人信息（纳税人识别号："+e+"）不合法！请重试</div>","提示"),!1)}function velidateXfsbh(e){var n=/^[0-9a-zA-Z]+$/;return""==e||0==e.length||(!!n.test(e)||(jAlert("<div id='popup_message'>请输入正确的销方税号！</div>","提示"),!1))}function checkFpdm(e){if(0!=e.length){if(10==e.length||12==e.length){var n=/^[0-9]*$/,t=n.test(e);return 0!=t||(jAlert("<div id='popup_message'>请输入正确的发票代码！</div>","提示"),!1)}return jAlert("<div id='popup_message'>请输入正确的发票代码！</div>","提示"),!1}return!0}function checkFphm(e){var n=/^\d{8}$/,t=/^0{8}$/,i=n.test(e),o=t.test(e);return 0==e.length||(1==i&&0==o||(jAlert("<div id='popup_message'>请输入正确的发票号码！</div>","提示"),!1))}function checkPass(e){var n=0;return e.match(/([a-z])+/)&&n++,e.match(/([0-9])+/)&&n++,e.match(/([A-Z])+/)&&n++,e.match(/[^a-zA-Z0-9]+/)&&n++,n}function getDqSsq(e){var n="",t=0;if(""==e){var i=new Date;n=i.getFullYear(),t=i.getMonth()+1}else n=e.substring(0,4),t=parseInt(e.substring(4),10);return n+"年"+t+"月"}function getDqrq(){var e=new Date,n=e.getFullYear(),t=e.getMonth()+1,i=e.getDate();return t<10&&(t="0"+t),i<10&&(i="0"+i),n+"-"+t+"-"+i}function getRzcxDate(e){var n=parseInt(e.substring(0,4),10),t=parseInt(e.substring(5,7),10);parseInt(e.substring(8),10);return 1==t?(n-=1,t=11):2==t?(n-=1,t=12):t-=2,t<10&&(t="0"+t),n+"-"+t+"-01"}function getNowDate(e){var n=new Date,t=n.getFullYear(),i=n.getMonth()+1,o=n.getDate();return 1==e?(1==i?(t-=1,i=12):i-=1,o=1):2==e&&(1==i?(i=12,t-=1):i-=1,o=getDayNum(t,i)),i<10&&(i="0"+i),o<10&&(o="0"+o),t+"-"+i+"-"+o}function getFirstDayOfMonth(e){var n="",t="";if(""==e||null==e||void 0==e){var i=new Date;n=i.getFullYear(),t=i.getMonth()+1}else n=parseInt(e.substring(0,4),10),t=parseInt(e.substring(5,7),10);return t<10&&(t="0"+t),n+"-"+t+"-01"}function getXtsj(e,n){var t=parseInt(e.substring(0,4),10),i=parseInt(e.substring(5,7),10),o=parseInt(e.substring(8),10);return 1==n?(1==i?(t-=1,i=12):i-=1,o=1):2==n&&(1==i?(i=12,t-=1):i-=1,o=getDayNum(t,i)),i<10&&(i="0"+i),o<10&&(o="0"+o),t+"-"+i+"-"+o}function getDayNum(e,n){var t=0;return t=2==n?e%4==0&&e%100!=0||e%400==0?29:28:4==n||6==n||9==n||11==n?30:31}function getFormatYuan(e){e+="";var n="",t="";if(""!=e){for(var i=e.split("."),o=i[0].length,a=(parseInt(o/3),i[0].split("")),r=o-1;r>=0;)n+=a[r],r-1>=0&&(n+=a[r-1]),r-2>=0&&(n+=a[r-2]),r-3>=0&&(n+=","),r-=3;t=n.split("").reverse().join(""),2==i.length?2==i[1].length?t+="."+i[1]:1==i[1].length&&(t+="."+i[1]+"0"):1==i.length&&(t+=".00")}else t="0";return t}function getFpfs(e){var n=0;if(""!=e){n=e;var t=e.indexOf(".");t>0&&(n=e.substring(0,t))}return n}function getXfsFpfs(e){var n=0;return""!=e&&(n=e),n}function getHxResult(e){var n="";return"1"==e?n="勾选":"0"==e&&(n="撤销"),n}function jungeIE(){var e=navigator.appName,n=navigator.appVersion,t=n.split(";"),i=t[1].replace(/[ ]/g,""),o="Y";return"Microsoft Internet Explorer"==e&&"MSIE6.0"==i?o="N":"Microsoft Internet Explorer"==e&&"MSIE7.0"==i?o="N":"Microsoft Internet Explorer"==e&&"MSIE8.0"==i?o="N":"Microsoft Internet Explorer"==e&&"MSIE9.0"==i&&(o="N"),o}function getDomainName(){var e=window.location.href,n=e.lastIndexOf("/"),t=e.substring(0,n)+"/";return t}function getUrl(){var e=window.location.href,n=e.lastIndexOf("/"),t=e.substring(n+1);return t}function quit(){jConfirm("<div id='popup_message'><br/>确定退出系统？<br/></div>","确认信息",function(e){if(e){var n=getCert(),t=/^[0-9a-zA-Z]+$/;if(""==n||!t.test(n))return window.location=getDomainName(),clearCookie("token"),clearCookie("nsrmc"),void clearCookie("dqrq");$.ajax({type:"post",url:IP+"/SbsqWW/quit.do",data:{cert:n},timeout:TIMEOUT,dataType:"jsonp",callback:"json",success:function(e){delayFlag="1";var n=e.key1;clearCookie("token"),clearCookie("nsrmc"),clearCookie("dqrq"),"01"==n?window.location=getDomainName():"03"==n&&jAlert("<div id='popup_message'>系统异常</div>！","提示")},error:function(){window.location=getDomainName()}})}})}function changeDateYYYYMM(e){if(null==e||void 0==e)return"";var n=e.substring(0,4),t=parseInt(e.substring(4),10);return n+"年"+t+"月"}function changeDateYYYYMMDD(e){if(null==e||void 0==e)return"";var n=e.substring(0,4),t=parseInt(e.substring(4,6),10),i=parseInt(e.substring(6),10);return n+"年"+t+"月"+i+"日"}function dateYYYYandMMandDD(e){if(null==e||void 0==e)return"";var n=e.substring(0,4),t=e.substring(4,6),i=e.substring(6);return n+"-"+t+"-"+i}function showModifyLog(){var e=getCookie("token"),n=getCert();if(velidateNsrsbh(n)){var t={cert:n,token:e,ymbb:"5.0.00"};$.ajax({type:"post",url:IP+"/SbsqWW/nsrdjxgrzrzcx.do",data:t,timeout:TIMEOUT,dataType:"jsonp",jsonp:"callback",success:function(n){var t=n.key1;if("00"==t){var i=n.key2;jAlert("<div id='popup_message'>查询失败！"+i+"</div>","提示")}else if("01"==t){e=n.key2,clearCookie("token"),setCookie("token",e,seconds);for(var o=n.key3,a=o.split(";"),r=a.length,s=[],d=0;d<r-1;d++){var p=a[d].split("=");s.push(createNsrxxLog(p))}loadNsrxxLog(s),$(".theme-popover-mask3").fadeIn(100),$(".theme-popover3").slideDown(200)}else"09"==t?jAlert("<div id='popup_message'>会话已超时，请重新登陆！</div>","提示",function(e){e&&(window.location.href=getDomainName())}):"10"==t?jAlert("<div id='popup_message'>超过最大请求数！</div>","提示"):"21"==t?jAlert("<div id='popup_message'>不存在修改记录！</div>","提示"):"98"==t?jAlert("<div id='popup_message'>外网调用内网异常，请重试！","提示"):"100"==t?jAlert("<div id='popup_message'>内网数据异常！","提示"):jAlert("<div id='popup_message'>系统异常，错误代码为:"+t+"</div>","提示")},error:function(e){""==e.responseText||void 0==e.responseText?jAlert("<div id='popup_message'>网络异常，请重试！</div>","提示"):jAlert("<div id='popup_message'>系统异常，请重试！统一受理系统报文为:"+e.responseText+"</div>","提示")}})}}function setTab(e,n,t){for(i=1;i<=t;i++){var o=document.getElementById(e+i),a=document.getElementById("con_"+e+"_"+i);o.className=i==n?"hover":"",a.style.display=i==n?"block":"none"}}function getTyslInfo(e){var n=/<TITLE>([\s\S]*?)<\/TITLE>/,t=e.match(n),i=t[0].replace("<TITLE>","").replace("</TITLE>",""),o=/<H3>([\s\S]*?)<\/H3>/,a=e.match(o),r=a[0].replace("<H3>","").replace("</H3>","").replace("<i>","").replace("</i>",""),s=/<H4>([\s\S]*?)<\/H4>/,d=e.match(s),p=d[0].replace("<H4>","").replace("</H4>",""),u=/<P>([\s\S]*?)<\/P>/,c=e.match(u),f=c[0].replace('<P><FONT FACE="Courier New">',"").replace("</FONT></P>","");return i+"\n"+r+"\n"+p+"\n"+f}function addSite(){var e="增值税发票选择确认平台",n=getDomainName();try{window.external.AddFavorite(n,e)}catch(t){try{window.sidebar.addPanel(e,n,"")}catch(t){var i="您的安全设置不允许此操作！<br />您需要手动搜藏网站：<br/><span style='color: red;'>"+n+"</span>";jAlert("<div id='popup_message'>"+i+"</div>","提示")}}}function setHome(e){var n=getDomainName();try{e.style.behavior="url(#default#homepage)",e.setHomePage(n)}catch(t){if(window.netscape)try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(t){var i="您的安全设置不允许此操作！<br />您需要手动将：<br/><span style='color: red;'>"+n+"</span><br/>设置为首页！";jAlert("<div id='popup_message'>"+i+"</div>","提示")}else{var i="您的安全设置不允许此操作！<br />您需要手动将：<br /><span style='color: red;'>"+n+"</span><br />设置为首页！";jAlert("<div id='popup_message'>"+i+"</div>","提示")}}}function toDesktop(){var e=getDomainName();try{var n=new ActiveXObject("WScript.Shell"),t=n.CreateShortcut(n.SpecialFolders("Desktop")+"\\增值税发票选择确认平台.url");t.TargetPath=e,t.Save()}catch(i){alert("快捷方式创建失败，浏览器不支持！")}}function helpInfo(e){window.showModelessDialog("help-"+e+".html","","dialogTop:50px;dialogWidth:1100px;dialogHeight:600px;minimize:yes;maximize:yes;")}function helpInfo_rename(e){window.showModelessDialog(e,"","dialogTop:50px;dialogWidth:1100px;dialogHeight:600px;minimize:yes;maximize:yes;")}function getCityName(){for(var e=new Array("https://fpdk.bjsat.gov.cn/","https://fpdk.tjsat.gov.cn/","https://fpdk.he-n-tax.gov.cn:81/","https://fpdk.sx-n-tax.gov.cn/","https://fpdk.nm-n-tax.gov.cn/","https://fpdk.tax.ln.cn/","https://fpdk.dlntax.gov.cn/","https://fpdk.jl-n-tax.gov.cn:4431/","https://fpdk.hl-n-tax.gov.cn/","https://fpdk.tax.sh.gov.cn/","https://fpdk.jsgs.gov.cn:81/","https://fpdk.zjtax.gov.cn/","https://fpdk.nb-n-tax.gov.cn/","https://fpdk.ah-n-tax.gov.cn/","https://fpdk.fj-n-tax.gov.cn/","https://fpdk.xm-n-tax.gov.cn/","https://fpdk.jxgs.gov.cn/","https://fpdk.sd-n-tax.gov.cn/","https://fpdk.qd-n-tax.gov.cn/","https://fpdk.ha-n-tax.gov.cn/","https://fpdk.hb-n-tax.gov.cn/","https://fpdk.hntax.gov.cn/","https://fpdk.gd-n-tax.gov.cn/","https://fpdk.szgs.gov.cn/","https://fpdk.gxgs.gov.cn/","https://fpdk.hitax.gov.cn/","https://fpdk.cqsw.gov.cn/","https://fpdk.sc-n-tax.gov.cn/","https://fpdk.gz-n-tax.gov.cn/","https://fpdk.yngs.gov.cn/","https://fpdk.xztax.gov.cn/","https://fprzweb.sn-n-tax.gov.cn/","https://fpdk.gs-n-tax.gov.cn/","http://fpdk.qh-n-tax.gov.cn/","https://fpdk.nxgs.gov.cn/","https://fpdk.xj-n-tax.gov.cn/","http://172.30.11.88:90/"),n=new Array("北京","天津","河北","山西","内蒙古","辽宁","大连","吉林","黑龙江","上海","江苏","浙江","宁波","安徽","福建","厦门","江西","山东","青岛","河南","湖北","湖南","广东","深圳","广西","海南","重庆","四川","贵州","云南","西藏","陕西","甘肃","青海","宁夏","新疆","首都"),t=getDomainName(),i="",o=0;o<e.length;o++)e[o].indexOf(t)>=0&&(i=n[o]);return void 0==i||null==i||0==i.length?"":"（"+i+"）"}function doCallback(e,n){return e.apply(this,n)}function showMenu(e){var n=!0;if(null!=e&&void 0!=e){var t=getUrl(),i=e.split(MENUSPLIT);if(null!=i){if(2!=i[2]&&(t.indexOf("xfsgzt")>=0||t.indexOf("cpyfprz")>=0||t.indexOf("cpyrztj")>=0))return n=!1,jAlert("<div id='popup_message'>您没有此功能权限！</div>","提示",function(e){e&&(window.location.href=getDomainName())}),window.location.href=getDomainName(),n;if(1!=i[6]&&(t.indexOf("ypdb.9bfa54d2")>=0||t.indexOf("ypdbcx.832f2ff7")>=0))return n=!1,jAlert("<div id='popup_message'>您没有此功能权限！</div>","提示",function(e){e&&(window.location.href=getDomainName())}),window.location.href=getDomainName(),n;if(1!=i[7]&&t.indexOf("yclykz")>=0)return n=!1,jAlert("<div id='popup_message'>您没有此功能权限！</div>","提示",function(e){e&&(window.location.href=getDomainName())}),window.location.href=getDomainName(),n;if(1!=i[2]&&t.indexOf("mxcx.2e5fa78b")>=0)return n=!1,jAlert("<div id='popup_message'>您没有此功能权限！</div>","提示",function(e){e&&(window.location.href=getDomainName())}),window.location.href=getDomainName(),n;if(0==i[2]&&t.indexOf("hggjsjxz.944d02b7")>=0)return n=!1,jAlert("<div id='popup_message'>您没有此功能权限！</div>","提示",function(e){e&&(window.location.href=getDomainName())}),window.location.href=getDomainName(),n;if("0"==i[0]||"5"==i[0]||"6"==i[0]?(t.indexOf("hts")<0&&(t.indexOf("dbts")>0||t.indexOf("ts")>0)&&(n=!1,jAlert("<div id='popup_message'>您没有此功能权限3！</div>","提示",function(e){e&&(window.location.href=getDomainName())})),$("#menu").show(),$("#menuts").hide(),$("#menudbts").hide()):2==i[1]?(t.indexOf("hts")<0&&t.indexOf("dbts")>0&&(n=!1,jAlert("<div id='popup_message'>您没有此功能权限1！</div>","提示",function(e){e&&(window.location.href=getDomainName())})),$("#menu").hide(),$("#menuts").show(),$("#menudbts").hide(),$("#pos").hide(),$("#posdbts").show()):3==i[1]?($("#menu").hide(),$("#menuts").hide(),$("#menudbts").show(),$("#pos").hide(),$("#posdbts").show()):(t.indexOf("hts")<0&&(t.indexOf("dbts")>0||t.indexOf("ts")>0)&&(n=!1,jAlert("<div id='popup_message'>您没有此功能权限2！</div>","提示",function(e){e&&(window.location.href=getDomainName())})),$("#menu").show(),$("#menuts").hide(),$("#menudbts").hide()),"1"==i[5]&&"2"==i[8]){if($("[name='all_menu']").hide(),$("[name='gzt_menu']").hide(),$("[name='fpcx_menu']").hide(),$("[name='gxtj_menu']").hide(),t.indexOf("main")>=0||t.indexOf("fphx")>=0||t.indexOf("upload")>=0||t.indexOf("fpcx")>=0||t.indexOf("sbqr.0cd1893d")>=0||t.indexOf("dktj")>=0)return n=!1,jAlert("<div id='popup_message'>您没有此功能权限！</div>","提示",function(e){e&&(window.location.href=getDomainName())}),window.location.href=getDomainName(),n}else if("1"==i[5]&&"1"==i[8]&&($("[name='all_menu']").hide(),$("[name='gzt_menu']").show(),$("[name='fpcx_menu']").show(),$("[name='gxtj_menu']").show(),t.indexOf("fphx")>=0||t.indexOf("upload")>=0||t.indexOf("sbqr.0cd1893d")>=0))return n=!1,jAlert("<div id='popup_message'>您没有此功能权限！</div>","提示",function(e){e&&(window.location.href=getDomainName())}),window.location.href=getDomainName(),n;if("1"==i[2])if($("[name='jxqy_menu']").show(),$("[name='scqy_menu']").hide(),$("[name='qcslr_menu']").show(),"1"==i[3]){$("[name='hggjxz_jxqy_menu']").show(),$("[name='fpgjxz_menu']").show(),$("[name='mxcx_menu']").show(),$("[name='cpyhsbz_menu']").show();var o=!1;"1"==i[5]&&"2"==i[8]&&(o=!0),o||("1"==i[6]&&($("[name='fpgjxz_menu']").hide(),$("[name='ypdb_menu']").show(),$("[name='ypdbcx_menu']").show()),"1"==i[7]&&$("[name='yclykz_menu']").show())}else $("[name='fpgjxz_menu']").show(),$("[name='hggjxz_menu']").show(),$("[name='mxcx_menu']").show(),$("[name='cpyhsbz_menu']").show(),(t.indexOf("fpgj")>-1||t.indexOf("hggj")>-1)&&(n=!1,jAlert("<div id='popup_message'>请先完成期初数据的录入！</div>","提示",function(e){e&&(window.location.href="qcsjlr.4b8d3734.html")}));else"2"==i[2]?($("[name='jxqy_menu']").hide(),$("[name='scqy_menu']").show(),$("[name='xfsgzt_menu']").show(),$("[name='hggjxz_scqy_menu']").show(),$("[name='cpyfprz_menu']").show(),$("[name='cpyrztj_menu']").show(),$("[name='cpyhsbz_menu']").show()):((t.indexOf("qcsj")>-1||t.indexOf("fpgj")>-1||t.indexOf("hggj")>-1||t.indexOf("mxcx.2e5fa78b")>-1||t.indexOf("cpybzcx")>-1)&&(n=!1,jAlert("<div id='popup_message'>您没有此功能权限4！</div>","提示",function(e){e&&(window.location.href=getDomainName())})),$("[name='cpygl_menu']").hide())}else t.indexOf("hts")<0&&(t.indexOf("dbts")>0||t.indexOf("ts")>0)&&(n=!1,jAlert("<div id='popup_message'>您没有此功能权限3！</div>","提示",function(e){e&&(window.location.href=getDomainName())})),$("#menu").show(),$("#menuts").hide(),$("#menudbts").hide()}else n=!1,jAlert("<div id='popup_message'>会话失效，请重新登录！</div>","提示",function(e){e&&(window.location.href=getDomainName())});return n}function checkNumber(e){var n=!0,t="1234567890.",i=0;if(void 0!=e&&null!=e){var o="a"+e;if(o.length>1){for(var a=1;a<o.length;a++){var r=o.charAt(a);if(t.indexOf(r)<0){n=!1;break}"."==r&&i++}i>1&&(n=!1)}else n=!1}else n=!1;return n}function createSwspbmtree(e,n){if(void 0!=e&&null!=e){e.options.length=0,e.options.add(new Option("请选择油品"));var t=JSON.parse(n),i=t.rootnode;if(void 0!=i&&null!=i&&i.length>0)for(var o=i.split("~"),a=0;a<o.length;a++){var r=o[a].split(";"),s=document.createElement("OPTGROUP");s.label=r[1],e.appendChild(s);var d=r[0],p=t[d];if(void 0!=p&&null!=p&&p.length>0)for(var u=p.split("~"),c=0;c<u.length;c++){var f=u[c].split(";");e.options.add(new Option(f[1],f[0]))}}}}function createHgspbmtree(e,n){if(void 0!=e&&null!=e){e.options.length=0,e.options.add(new Option("请选择油品"));var t=JSON.parse(n),i=t.hgsh;if(void 0!=i&&null!=i&&i.length>0)for(var o=i.split("~"),a=0;a<o.length;a++){var r=o[a].split(";"),s=t[o[a]]+"("+r[0]+")";e.options.add(new Option(s,o[a]))}}}function toFixed(e,n){var t=Math.pow(10,n),i=e*t+.5;return i=parseInt(i,10)/t,i+""}function getRandomNum(){var e=490,n=Math.random();return 10+Math.round(n*e)}var MENUSPLIT="~",floatObj=function(){function e(e){return Math.floor(e)===e}function n(n){var t={times:1,num:0};if(e(n))return t.num=n,t;var i=n+"",o=i.indexOf("."),a=i.substr(o+1).length,r=Math.pow(10,a),s=parseInt(n*r+.5,10);return t.times=r,t.num=s,t}function t(e,t,i){var o=n(e),a=n(t),r=o.num,s=a.num,d=o.times,p=a.times,u=d>p?d:p,c=null;switch(i){case"add":return c=d===p?r+s:d>p?r+s*(d/p):r*(p/d)+s,c/u;case"subtract":return c=d===p?r-s:d>p?r-s*(d/p):r*(p/d)-s,c/u;case"multiply":return c=r*s/(d*p);case"divide":return c=r/s*(p/d)}}function i(e,n){return t(e,n,"add")}function o(e,n){return t(e,n,"subtract")}function a(e,n){return t(e,n,"multiply")}function r(e,n){return t(e,n,"divide")}return{add:i,sub:o,multi:a,divide:r}}();